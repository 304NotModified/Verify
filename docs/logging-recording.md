<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /docs/mdsource/logging-recording.source.md
To change this file edit the source file and then run MarkdownSnippets.
-->

# Logging Recording

Logging Recording allows, when a method is being tested, for any [logging](https://docs.microsoft.com/en-us/dotnet/core/extensions/logging) made as part of that method call to be recorded and verified.


## Usage

Call `LoggerRecording.Start();` to get an instance of the `LoggerProvider`. `LoggerProvider` implements both `ILogger` and `ILoggerProvider`.

The pass in the `LoggerProvider` instance to a class/method that write log entries:

<!-- snippet: LoggerRecording -->
<a id='snippet-loggerrecording'></a>
```cs
[Fact]
public Task Logging()
{
    var provider = LoggerRecording.Start();
    var target = new ClassThatUsesLogging(provider);

    var result = target.Method();

    return Verifier.Verify(result);
}

class ClassThatUsesLogging
{
    ILogger logger;

    public ClassThatUsesLogging(ILogger logger)
    {
        this.logger = logger;
    }

    public string Method()
    {
        logger.LogWarning("The log entry");
        using (logger.BeginScope("The scope"))
        {
            logger.LogWarning("Entry in scope");
        }

        return "result";
    }
}
```
<sup><a href='/src/Verify.Tests/Tests.cs#L126-L158' title='Snippet source file'>snippet source</a> | <a href='#snippet-loggerrecording' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Results in:

<!-- snippet: Tests.Logging.verified.txt -->
<a id='snippet-Tests.Logging.verified.txt'></a>
```txt
{
  target: Foo,
  logs: [
    {
      Level: Warning,
      Message: theMessage
    },
    {
      Message: BeginScope: scopeState
    },
    {
      Level: Warning,
      Message: theMessageInScope
    },
    {
      Message: EndScope
    }
  ]
}
```
<sup><a href='/src/Verify.Tests/Tests.Logging.verified.txt#L1-L19' title='Snippet source file'>snippet source</a> | <a href='#snippet-Tests.Logging.verified.txt' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->
